<!DOCTYPE html>
<html>
    <head>
        <title>Login Page</title>
        <script src="https://accounts.google.com/gsi/client" async defer></script>
    </head>
    <body>
        <h1>Login</h1>
        <div id="g_id_onload"
            data-client_id="1089547108535-tugs5c1gj470v5h94i6c61jmma30gnan.apps.googleusercontent.com"
            data-context="signin"
            data-ux_mode="popup"
            data-callback="LoginHandle"
            data-auto_prompt="false">
        </div>

        <div class="g_id_signin"
            data-type="standard"
            data-shape="pill"
            data-theme="filled_blue"
            data-text="signin_with"
            data-size="large"
            data-logo_alignment="left">
        </div>

        <script>
            function LoginHandle(credentialresponse){ //CredentialResponse object is received
                fetch('/login',{
                    method:'POST',
                    headers: {'Content-Type': 'application/json'},
                    body:JSON.stringify(credentialresponse)
                })
                .then(response=>response.json())
                .then((data)=>{
                    console.log('the data received is:',data);
                    const request=new XMLHttpRequest();
                    request.open('GET',data.redir);
                    request.send();
                })
                .catch(err=>console.log('eror',err));
            }
        
                
        </script>
        
    </body>
</html>